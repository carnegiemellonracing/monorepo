diff --git a/.cproject b/.cproject
index 2c3e584..b375a61 100644
--- a/.cproject
+++ b/.cproject
@@ -1,131 +1,6 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
 <?fileVersion 4.0.0?><cproject storage_type_id="org.eclipse.cdt.core.XmlProjectDescriptionStorage">
 	<storageModule moduleId="org.eclipse.cdt.core.settings">
-		<cconfiguration id="com.atollic.truestudio.exe.debug.16331328">
-			<storageModule buildSystemId="org.eclipse.cdt.managedbuilder.core.configurationDataProvider" id="com.atollic.truestudio.exe.debug.16331328" moduleId="org.eclipse.cdt.core.settings" name="Pump_Release">
-				<externalSettings/>
-				<extensions>
-					<extension id="org.eclipse.cdt.core.ELF" point="org.eclipse.cdt.core.BinaryParser"/>
-					<extension id="org.eclipse.cdt.core.GASErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-					<extension id="org.eclipse.cdt.core.GLDErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-					<extension id="org.eclipse.cdt.core.GCCErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-				</extensions>
-			</storageModule>
-			<storageModule moduleId="cdtBuildSystem" version="4.0.0">
-				<configuration artifactExtension="elf" artifactName="${ProjName}-release" buildArtefactType="org.eclipse.cdt.build.core.buildArtefactType.exe" buildProperties="org.eclipse.cdt.build.core.buildArtefactType=org.eclipse.cdt.build.core.buildArtefactType.exe" cleanCommand="rm -rf" description="[Pump variant] -O3" errorParsers="org.eclipse.cdt.core.GASErrorParser;org.eclipse.cdt.core.GLDErrorParser;org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.16331328" name="Pump_Release" parent="com.atollic.truestudio.exe.debug" postannouncebuildStep="" postbuildStep="" preannouncebuildStep="" prebuildStep="">
-					<folderInfo id="com.atollic.truestudio.exe.debug.16331328." name="/" resourcePath="">
-						<toolChain errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.1602519286" name="Atollic ARM Tools" superClass="com.atollic.truestudio.exe.debug.toolchain">
-							<option id="com.atollic.truestudio.general.runtimelib.2119115066" name="Runtime Library" superClass="com.atollic.truestudio.general.runtimelib" useByScannerDiscovery="false" value="com.atollic.truestudio.ld.general.clib.small" valueType="enumerated"/>
-							<option id="com.atollic.truestudio.toolchain_options.mcu.267799582" name="Microcontroller" superClass="com.atollic.truestudio.toolchain_options.mcu" useByScannerDiscovery="false" value="STM32F413RG" valueType="string"/>
-							<option id="com.atollic.truestudio.toolchain_options.vendor.1794773975" name="Vendor name" superClass="com.atollic.truestudio.toolchain_options.vendor" useByScannerDiscovery="false" value="STMicroelectronics" valueType="string"/>
-							<targetPlatform archList="all" binaryParser="org.eclipse.cdt.core.ELF" id="com.atollic.truestudio.exe.debug.toolchain.platform.845909949" isAbstract="false" name="Debug platform" osList="all" superClass="com.atollic.truestudio.exe.debug.toolchain.platform"/>
-							<builder autoBuildTarget="" buildPath="${workspace_loc}/Release" cleanBuildTarget="" customBuilderProperties="toolChainpathString=/opt/Atollic_TrueSTUDIO_for_STM32_x86_64_9.0.1/ARMTools/bin|toolChainpathType=1|com.atollic.truestudio.common_options.target.vendor=STMicroelectronics|com.atollic.truestudio.common_options.target.mcu=STM32F413RG|" enableAutoBuild="false" enableCleanBuild="true" enabledIncrementalBuild="true" errorParsers="" id="com.atollic.truestudio.mbs.builder1.1695077905" incrementalBuildTarget="" keepEnvironmentInBuildfile="false" managedBuildOn="true" name="CDT Internal Builder" parallelBuildOn="true" parallelizationNumber="optimal" superClass="com.atollic.truestudio.mbs.builder1"/>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}" errorParsers="org.eclipse.cdt.core.GASErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.as.464910571" name="Assembler" superClass="com.atollic.truestudio.exe.debug.toolchain.as">
-								<option id="com.atollic.truestudio.common_options.target.endianess.745682121" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.402753643" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.194025605" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.618616449" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1104781022" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.as.symbols.defined.1137156400" name="Defined symbols" superClass="com.atollic.truestudio.as.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-								</option>
-								<option id="com.atollic.truestudio.as.general.incpath.48031816" name="Include path" superClass="com.atollic.truestudio.as.general.incpath" useByScannerDiscovery="false" valueType="includePath">
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Device}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/HAL/Inc}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1168954831" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.as.input.539934838" name="Input" superClass="com.atollic.truestudio.as.input"/>
-							</tool>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${INPUTS} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT}" errorParsers="org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.gcc.1994149082" name="C Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc">
-								<option id="com.atollic.truestudio.gcc.symbols.defined.649503167" name="Defined symbols" superClass="com.atollic.truestudio.gcc.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-									<listOptionValue builtIn="false" value="CMR_PTC_ID=0"/>
-								</option>
-								<option id="com.atollic.truestudio.gcc.directories.select.1265784282" name="Include path" superClass="com.atollic.truestudio.gcc.directories.select" useByScannerDiscovery="false" valueType="includePath">
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Device}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/HAL/Inc}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.1602335947" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1932497071" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.23744897" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.2068293572" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.341042555" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_garbage.1964722607" name="Prepare dead code removal " superClass="com.atollic.truestudio.gcc.optimization.prep_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_data.501364178" name="Prepare dead data removal" superClass="com.atollic.truestudio.gcc.optimization.prep_data" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.misc.otherflags.819005817" name="Other options" superClass="com.atollic.truestudio.gcc.misc.otherflags" useByScannerDiscovery="false" value="" valueType="string"/>
-								<option id="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level.1686490402" name="Optimization Level" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level" useByScannerDiscovery="false" value="com.atollic.truestudio.gcc.optimization.level.03" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.659074927" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.gcc.symbols.undefined.1927402912" name="Undefined symbols" superClass="com.atollic.truestudio.gcc.symbols.undefined" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.gcc.input.910732605" superClass="com.atollic.truestudio.gcc.input"/>
-							</tool>
-							<tool command="arm-atollic-eabi-gcc" commandLinePattern="${COMMAND} ${OUTPUT_FLAG} ${OUTPUT} ${INPUTS} ${FLAGS}" errorParsers="org.eclipse.cdt.core.GLDErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.ld.1752324239" name="C Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ld">
-								<option id="com.atollic.truestudio.common_options.target.endianess.1602703443" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1083555131" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1013457462" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.262229440" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.763976969" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ld.general.scriptfile.1463855899" name="Linker script" superClass="com.atollic.truestudio.ld.general.scriptfile" useByScannerDiscovery="false" value="../STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ld.optimization.do_garbage.1278858801" name="Dead code removal " superClass="com.atollic.truestudio.ld.optimization.do_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ld.misc.genmapfile.738791610" name="Create map file" superClass="com.atollic.truestudio.ld.misc.genmapfile" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1763091363" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.ld.input.151545752" name="Input" superClass="com.atollic.truestudio.ld.input">
-									<additionalInput kind="additionalinputdependency" paths="$(USER_OBJS)"/>
-									<additionalInput kind="additionalinput" paths="$(LIBS)"/>
-								</inputType>
-							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.gpp.5608038" name="C++ Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gpp">
-								<option id="com.atollic.truestudio.gpp.symbols.defined.1050323356" name="Defined symbols" superClass="com.atollic.truestudio.gpp.symbols.defined" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-								</option>
-								<option id="com.atollic.truestudio.gpp.directories.select.868788644" name="Include path" superClass="com.atollic.truestudio.gpp.directories.select" valueType="includePath">
-									<listOptionValue builtIn="false" value="../src"/>
-									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Include"/>
-									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Device/ST/STM32F4xx/Include"/>
-									<listOptionValue builtIn="false" value="../Drivers/STM32F4xx_HAL_Driver/Inc"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.109614949" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1112121008" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1194616142" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1475383559" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1886553177" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_garbage.727706399" name="Prepare dead code removal" superClass="com.atollic.truestudio.gpp.optimization.prep_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_data.455966375" name="Prepare dead data removal" superClass="com.atollic.truestudio.gpp.optimization.prep_data" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_rtti.1493352215" name="Disable RTTI" superClass="com.atollic.truestudio.gpp.optimization.fno_rtti"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_exceptions.1104010333" name="Disable exception handling" superClass="com.atollic.truestudio.gpp.optimization.fno_exceptions"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.333825654" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
-							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.ldcc.513757111" name="C++ Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ldcc">
-								<option id="com.atollic.truestudio.common_options.target.endianess.1313771070" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.904248473" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1006509119" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1695774721" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1268523142" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ldcc.optimization.do_garbage.2137393389" name="Dead code removal" superClass="com.atollic.truestudio.ldcc.optimization.do_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ldcc.general.scriptfile.736864150" name="Linker script" superClass="com.atollic.truestudio.ldcc.general.scriptfile" value="../STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ldcc.misc.genmapfile.1570538385" name="Create map file" superClass="com.atollic.truestudio.ldcc.misc.genmapfile"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1382198716" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
-							</tool>
-							<tool id="com.atollic.truestudio.ar.base.1782137510" name="Archiver" superClass="com.atollic.truestudio.ar.base"/>
-							<tool command="arm-atollic-reports.jar" commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS}" errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.secoutput.1053385560" name="Other" superClass="com.atollic.truestudio.exe.debug.toolchain.secoutput"/>
-						</toolChain>
-					</folderInfo>
-					<sourceEntries>
-						<entry flags="VALUE_WORKSPACE_PATH|RESOLVED" kind="sourcePath" name=""/>
-					</sourceEntries>
-				</configuration>
-			</storageModule>
-			<storageModule moduleId="org.eclipse.cdt.core.externalSettings"/>
-		</cconfiguration>
 		<cconfiguration id="com.atollic.truestudio.exe.debug.16331328.484500006">
 			<storageModule buildSystemId="org.eclipse.cdt.managedbuilder.core.configurationDataProvider" id="com.atollic.truestudio.exe.debug.16331328.484500006" moduleId="org.eclipse.cdt.core.settings" name="Pump_Debug">
 				<externalSettings/>
@@ -251,8 +126,8 @@
 			</storageModule>
 			<storageModule moduleId="org.eclipse.cdt.core.externalSettings"/>
 		</cconfiguration>
-		<cconfiguration id="com.atollic.truestudio.exe.debug.16331328.1650674734">
-			<storageModule buildSystemId="org.eclipse.cdt.managedbuilder.core.configurationDataProvider" id="com.atollic.truestudio.exe.debug.16331328.1650674734" moduleId="org.eclipse.cdt.core.settings" name="Fan_Release">
+		<cconfiguration id="com.atollic.truestudio.exe.debug.16331328.484500006.1984711842">
+			<storageModule buildSystemId="org.eclipse.cdt.managedbuilder.core.configurationDataProvider" id="com.atollic.truestudio.exe.debug.16331328.484500006.1984711842" moduleId="org.eclipse.cdt.core.settings" name="PTC_Debug">
 				<externalSettings/>
 				<extensions>
 					<extension id="org.eclipse.cdt.core.ELF" point="org.eclipse.cdt.core.BinaryParser"/>
@@ -262,24 +137,24 @@
 				</extensions>
 			</storageModule>
 			<storageModule moduleId="cdtBuildSystem" version="4.0.0">
-				<configuration artifactExtension="elf" artifactName="${ProjName}-release" buildArtefactType="org.eclipse.cdt.build.core.buildArtefactType.exe" buildProperties="org.eclipse.cdt.build.core.buildArtefactType=org.eclipse.cdt.build.core.buildArtefactType.exe" cleanCommand="rm -rf" description="[Fan variant] -O3" errorParsers="org.eclipse.cdt.core.GASErrorParser;org.eclipse.cdt.core.GLDErrorParser;org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.16331328.1650674734" name="Fan_Release" parent="com.atollic.truestudio.exe.debug" postannouncebuildStep="" postbuildStep="" preannouncebuildStep="" prebuildStep="">
-					<folderInfo id="com.atollic.truestudio.exe.debug.16331328.1650674734." name="/" resourcePath="">
-						<toolChain errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.200914279" name="Atollic ARM Tools" superClass="com.atollic.truestudio.exe.debug.toolchain">
-							<option id="com.atollic.truestudio.general.runtimelib.397286871" name="Runtime Library" superClass="com.atollic.truestudio.general.runtimelib" useByScannerDiscovery="false" value="com.atollic.truestudio.ld.general.clib.small" valueType="enumerated"/>
-							<option id="com.atollic.truestudio.toolchain_options.mcu.1804197125" name="Microcontroller" superClass="com.atollic.truestudio.toolchain_options.mcu" useByScannerDiscovery="false" value="STM32F413RG" valueType="string"/>
-							<option id="com.atollic.truestudio.toolchain_options.vendor.1421137645" name="Vendor name" superClass="com.atollic.truestudio.toolchain_options.vendor" useByScannerDiscovery="false" value="STMicroelectronics" valueType="string"/>
-							<targetPlatform archList="all" binaryParser="org.eclipse.cdt.core.ELF" id="com.atollic.truestudio.exe.debug.toolchain.platform.673568729" isAbstract="false" name="Debug platform" osList="all" superClass="com.atollic.truestudio.exe.debug.toolchain.platform"/>
-							<builder autoBuildTarget="" buildPath="${workspace_loc}/Release" cleanBuildTarget="" customBuilderProperties="toolChainpathString=/opt/Atollic_TrueSTUDIO_for_STM32_x86_64_9.0.1/ARMTools/bin|toolChainpathType=1|com.atollic.truestudio.common_options.target.vendor=STMicroelectronics|com.atollic.truestudio.common_options.target.mcu=STM32F413RG|" enableAutoBuild="false" enableCleanBuild="true" enabledIncrementalBuild="true" errorParsers="" id="com.atollic.truestudio.mbs.builder1.1499584171" incrementalBuildTarget="" keepEnvironmentInBuildfile="false" managedBuildOn="true" name="CDT Internal Builder" parallelBuildOn="true" parallelizationNumber="optimal" superClass="com.atollic.truestudio.mbs.builder1"/>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}" errorParsers="org.eclipse.cdt.core.GASErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.as.489344757" name="Assembler" superClass="com.atollic.truestudio.exe.debug.toolchain.as">
-								<option id="com.atollic.truestudio.common_options.target.endianess.1862249018" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1800631336" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1115784127" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1024337743" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.683935951" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.as.symbols.defined.514813366" name="Defined symbols" superClass="com.atollic.truestudio.as.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
+				<configuration artifactExtension="elf" artifactName="${ProjName}-debug" buildArtefactType="org.eclipse.cdt.build.core.buildArtefactType.exe" buildProperties="org.eclipse.cdt.build.core.buildArtefactType=org.eclipse.cdt.build.core.buildArtefactType.exe" cleanCommand="rm -rf" description="-O0" errorParsers="org.eclipse.cdt.core.GASErrorParser;org.eclipse.cdt.core.GLDErrorParser;org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.16331328.484500006.1984711842" name="PTC_Debug" parent="com.atollic.truestudio.exe.debug" postannouncebuildStep="" postbuildStep="" preannouncebuildStep="" prebuildStep="">
+					<folderInfo id="com.atollic.truestudio.exe.debug.16331328.484500006.1984711842." name="/" resourcePath="">
+						<toolChain errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.1675250493" name="Atollic ARM Tools" superClass="com.atollic.truestudio.exe.debug.toolchain">
+							<option id="com.atollic.truestudio.general.runtimelib.1614622712" name="Runtime Library" superClass="com.atollic.truestudio.general.runtimelib" useByScannerDiscovery="false" value="com.atollic.truestudio.ld.general.clib.small" valueType="enumerated"/>
+							<option id="com.atollic.truestudio.toolchain_options.mcu.2017106782" name="Microcontroller" superClass="com.atollic.truestudio.toolchain_options.mcu" useByScannerDiscovery="false" value="STM32F413RG" valueType="string"/>
+							<option id="com.atollic.truestudio.toolchain_options.vendor.502024738" name="Vendor name" superClass="com.atollic.truestudio.toolchain_options.vendor" useByScannerDiscovery="false" value="STMicroelectronics" valueType="string"/>
+							<targetPlatform archList="all" binaryParser="org.eclipse.cdt.core.ELF" id="com.atollic.truestudio.exe.debug.toolchain.platform.1014853953" isAbstract="false" name="Debug platform" osList="all" superClass="com.atollic.truestudio.exe.debug.toolchain.platform"/>
+							<builder autoBuildTarget="" buildPath="${workspace_loc}/Release" cleanBuildTarget="" customBuilderProperties="toolChainpathString=C:\\Program Files (x86)\\Atollic\\TrueSTUDIO for STM32 9.3.0\\ARMTools\\bin|toolChainpathType=1|com.atollic.truestudio.common_options.target.vendor=STMicroelectronics|com.atollic.truestudio.common_options.target.mcu=STM32F413RG|" enableAutoBuild="false" enableCleanBuild="true" enabledIncrementalBuild="true" errorParsers="" id="com.atollic.truestudio.mbs.builder1.1691479726" incrementalBuildTarget="" keepEnvironmentInBuildfile="false" managedBuildOn="true" name="CDT Internal Builder" parallelBuildOn="true" parallelizationNumber="optimal" superClass="com.atollic.truestudio.mbs.builder1"/>
+							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}" errorParsers="org.eclipse.cdt.core.GASErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.as.616547059" name="Assembler" superClass="com.atollic.truestudio.exe.debug.toolchain.as">
+								<option id="com.atollic.truestudio.common_options.target.endianess.908925440" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
+								<option id="com.atollic.truestudio.common_options.target.mcpu.1807696336" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.instr_set.1279003719" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpucore.1011887439" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpu.1862863874" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.as.symbols.defined.773205441" name="Defined symbols" superClass="com.atollic.truestudio.as.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
 									<listOptionValue builtIn="false" value="STM32F413xx"/>
 								</option>
-								<option id="com.atollic.truestudio.as.general.incpath.1190413124" name="Include path" superClass="com.atollic.truestudio.as.general.incpath" useByScannerDiscovery="false" valueType="includePath">
+								<option id="com.atollic.truestudio.as.general.incpath.996886500" name="Include path" superClass="com.atollic.truestudio.as.general.incpath" useByScannerDiscovery="false" valueType="includePath">
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
@@ -288,141 +163,16 @@
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
 								</option>
-								<option id="com.atollic.truestudio.common_options.target.interwork.64735458" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.as.input.443077823" name="Input" superClass="com.atollic.truestudio.as.input"/>
+								<option id="com.atollic.truestudio.common_options.target.interwork.25212358" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
+								<inputType id="com.atollic.truestudio.as.input.1612733556" name="Input" superClass="com.atollic.truestudio.as.input"/>
 							</tool>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${INPUTS} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT}" errorParsers="org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.gcc.175226038" name="C Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc">
-								<option id="com.atollic.truestudio.gcc.symbols.defined.1018112992" name="Defined symbols" superClass="com.atollic.truestudio.gcc.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
+							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${INPUTS} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT}" errorParsers="org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.gcc.1381655611" name="C Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc">
+								<option id="com.atollic.truestudio.gcc.symbols.defined.1529834501" name="Defined symbols" superClass="com.atollic.truestudio.gcc.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
 									<listOptionValue builtIn="false" value="STM32F413xx"/>
-									<listOptionValue builtIn="false" value="CMR_PTC_ID=1"/>
-								</option>
-								<option id="com.atollic.truestudio.gcc.directories.select.1272255861" name="Include path" superClass="com.atollic.truestudio.gcc.directories.select" useByScannerDiscovery="false" valueType="includePath">
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Device}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/HAL/Inc}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.1397408531" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.986669448" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.359003639" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1000177385" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.869254418" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_garbage.458101599" name="Prepare dead code removal " superClass="com.atollic.truestudio.gcc.optimization.prep_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_data.2046721036" name="Prepare dead data removal" superClass="com.atollic.truestudio.gcc.optimization.prep_data" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.misc.otherflags.28750057" name="Other options" superClass="com.atollic.truestudio.gcc.misc.otherflags" useByScannerDiscovery="false" value="" valueType="string"/>
-								<option id="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level.228644014" name="Optimization Level" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level" useByScannerDiscovery="false" value="com.atollic.truestudio.gcc.optimization.level.03" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1786778437" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.gcc.symbols.undefined.920469731" name="Undefined symbols" superClass="com.atollic.truestudio.gcc.symbols.undefined" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.gcc.input.1828176104" superClass="com.atollic.truestudio.gcc.input"/>
-							</tool>
-							<tool command="arm-atollic-eabi-gcc" commandLinePattern="${COMMAND} ${OUTPUT_FLAG} ${OUTPUT} ${INPUTS} ${FLAGS}" errorParsers="org.eclipse.cdt.core.GLDErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.ld.689586563" name="C Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ld">
-								<option id="com.atollic.truestudio.common_options.target.endianess.28926708" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1191976" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1735255286" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1669682321" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1632906131" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ld.general.scriptfile.260338993" name="Linker script" superClass="com.atollic.truestudio.ld.general.scriptfile" useByScannerDiscovery="false" value="../STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ld.optimization.do_garbage.937349627" name="Dead code removal " superClass="com.atollic.truestudio.ld.optimization.do_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ld.misc.genmapfile.2060606077" name="Create map file" superClass="com.atollic.truestudio.ld.misc.genmapfile" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.2052998665" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.ld.input.1960102268" name="Input" superClass="com.atollic.truestudio.ld.input">
-									<additionalInput kind="additionalinputdependency" paths="$(USER_OBJS)"/>
-									<additionalInput kind="additionalinput" paths="$(LIBS)"/>
-								</inputType>
-							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.gpp.1943527774" name="C++ Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gpp">
-								<option id="com.atollic.truestudio.gpp.symbols.defined.955314626" name="Defined symbols" superClass="com.atollic.truestudio.gpp.symbols.defined" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-								</option>
-								<option id="com.atollic.truestudio.gpp.directories.select.1259338786" name="Include path" superClass="com.atollic.truestudio.gpp.directories.select" valueType="includePath">
-									<listOptionValue builtIn="false" value="../src"/>
-									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Include"/>
-									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Device/ST/STM32F4xx/Include"/>
-									<listOptionValue builtIn="false" value="../Drivers/STM32F4xx_HAL_Driver/Inc"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.756629212" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.874798831" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1270349845" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1947736360" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1987908109" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_garbage.1893306009" name="Prepare dead code removal" superClass="com.atollic.truestudio.gpp.optimization.prep_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_data.1818468211" name="Prepare dead data removal" superClass="com.atollic.truestudio.gpp.optimization.prep_data" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_rtti.1712313216" name="Disable RTTI" superClass="com.atollic.truestudio.gpp.optimization.fno_rtti"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_exceptions.869398416" name="Disable exception handling" superClass="com.atollic.truestudio.gpp.optimization.fno_exceptions"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1291980947" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
-							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.ldcc.1134844225" name="C++ Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ldcc">
-								<option id="com.atollic.truestudio.common_options.target.endianess.851821901" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1694255326" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.382313852" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1770164916" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1176107898" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ldcc.optimization.do_garbage.2107376411" name="Dead code removal" superClass="com.atollic.truestudio.ldcc.optimization.do_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ldcc.general.scriptfile.1904002857" name="Linker script" superClass="com.atollic.truestudio.ldcc.general.scriptfile" value="../STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ldcc.misc.genmapfile.599083180" name="Create map file" superClass="com.atollic.truestudio.ldcc.misc.genmapfile"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.2092653161" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
-							</tool>
-							<tool id="com.atollic.truestudio.ar.base.2079413105" name="Archiver" superClass="com.atollic.truestudio.ar.base"/>
-							<tool command="arm-atollic-reports.jar" commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS}" errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.secoutput.1463536367" name="Other" superClass="com.atollic.truestudio.exe.debug.toolchain.secoutput"/>
-						</toolChain>
-					</folderInfo>
-					<sourceEntries>
-						<entry flags="VALUE_WORKSPACE_PATH|RESOLVED" kind="sourcePath" name=""/>
-					</sourceEntries>
-				</configuration>
-			</storageModule>
-			<storageModule moduleId="org.eclipse.cdt.core.externalSettings"/>
-		</cconfiguration>
-		<cconfiguration id="com.atollic.truestudio.exe.debug.16331328.484500006.545666923">
-			<storageModule buildSystemId="org.eclipse.cdt.managedbuilder.core.configurationDataProvider" id="com.atollic.truestudio.exe.debug.16331328.484500006.545666923" moduleId="org.eclipse.cdt.core.settings" name="Fan_Debug">
-				<externalSettings/>
-				<extensions>
-					<extension id="org.eclipse.cdt.core.ELF" point="org.eclipse.cdt.core.BinaryParser"/>
-					<extension id="org.eclipse.cdt.core.GASErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-					<extension id="org.eclipse.cdt.core.GLDErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-					<extension id="org.eclipse.cdt.core.GCCErrorParser" point="org.eclipse.cdt.core.ErrorParser"/>
-				</extensions>
-			</storageModule>
-			<storageModule moduleId="cdtBuildSystem" version="4.0.0">
-				<configuration artifactExtension="elf" artifactName="${ProjName}-debug" buildArtefactType="org.eclipse.cdt.build.core.buildArtefactType.exe" buildProperties="org.eclipse.cdt.build.core.buildArtefactType=org.eclipse.cdt.build.core.buildArtefactType.exe" cleanCommand="rm -rf" description="[Fan variant] -O0" errorParsers="org.eclipse.cdt.core.GASErrorParser;org.eclipse.cdt.core.GLDErrorParser;org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.16331328.484500006.545666923" name="Fan_Debug" parent="com.atollic.truestudio.exe.debug" postannouncebuildStep="" postbuildStep="" preannouncebuildStep="" prebuildStep="">
-					<folderInfo id="com.atollic.truestudio.exe.debug.16331328.484500006.545666923." name="/" resourcePath="">
-						<toolChain errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.1500773629" name="Atollic ARM Tools" superClass="com.atollic.truestudio.exe.debug.toolchain">
-							<option id="com.atollic.truestudio.general.runtimelib.906584735" name="Runtime Library" superClass="com.atollic.truestudio.general.runtimelib" useByScannerDiscovery="false" value="com.atollic.truestudio.ld.general.clib.small" valueType="enumerated"/>
-							<option id="com.atollic.truestudio.toolchain_options.mcu.1746547429" name="Microcontroller" superClass="com.atollic.truestudio.toolchain_options.mcu" useByScannerDiscovery="false" value="STM32F413RG" valueType="string"/>
-							<option id="com.atollic.truestudio.toolchain_options.vendor.828176669" name="Vendor name" superClass="com.atollic.truestudio.toolchain_options.vendor" useByScannerDiscovery="false" value="STMicroelectronics" valueType="string"/>
-							<targetPlatform archList="all" binaryParser="org.eclipse.cdt.core.ELF" id="com.atollic.truestudio.exe.debug.toolchain.platform.2134308266" isAbstract="false" name="Debug platform" osList="all" superClass="com.atollic.truestudio.exe.debug.toolchain.platform"/>
-							<builder autoBuildTarget="" buildPath="${workspace_loc}/Release" cleanBuildTarget="" customBuilderProperties="toolChainpathString=/opt/Atollic_TrueSTUDIO_for_STM32_x86_64_9.0.1/ARMTools/bin|toolChainpathType=1|com.atollic.truestudio.common_options.target.vendor=STMicroelectronics|com.atollic.truestudio.common_options.target.mcu=STM32F413RG|" enableAutoBuild="false" enableCleanBuild="true" enabledIncrementalBuild="true" errorParsers="" id="com.atollic.truestudio.mbs.builder1.1966679903" incrementalBuildTarget="" keepEnvironmentInBuildfile="false" managedBuildOn="true" name="CDT Internal Builder" parallelBuildOn="true" parallelizationNumber="optimal" superClass="com.atollic.truestudio.mbs.builder1"/>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}" errorParsers="org.eclipse.cdt.core.GASErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.as.1278013435" name="Assembler" superClass="com.atollic.truestudio.exe.debug.toolchain.as">
-								<option id="com.atollic.truestudio.common_options.target.endianess.240179332" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1720226099" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.2026519680" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.166364602" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1983707108" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.as.symbols.defined.2034468393" name="Defined symbols" superClass="com.atollic.truestudio.as.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-								</option>
-								<option id="com.atollic.truestudio.as.general.incpath.440943172" name="Include path" superClass="com.atollic.truestudio.as.general.incpath" useByScannerDiscovery="false" valueType="includePath">
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Device}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/HAL/Inc}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
-									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
-								</option>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1108701359" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.as.input.1912246374" name="Input" superClass="com.atollic.truestudio.as.input"/>
-							</tool>
-							<tool command="arm-atollic-eabi-gcc -c" commandLinePattern="${COMMAND} ${INPUTS} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT}" errorParsers="org.eclipse.cdt.core.GCCErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.gcc.1939411310" name="C Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc">
-								<option id="com.atollic.truestudio.gcc.symbols.defined.1283414644" name="Defined symbols" superClass="com.atollic.truestudio.gcc.symbols.defined" useByScannerDiscovery="false" valueType="definedSymbols">
-									<listOptionValue builtIn="false" value="STM32F413xx"/>
-									<listOptionValue builtIn="false" value="CMR_PTC_ID=1"/>
+									<listOptionValue builtIn="false" value="CMR_PTC_ID=0"/>
 									<listOptionValue builtIn="false" value="configASSERT"/>
 								</option>
-								<option id="com.atollic.truestudio.gcc.directories.select.1820603249" name="Include path" superClass="com.atollic.truestudio.gcc.directories.select" useByScannerDiscovery="false" valueType="includePath">
+								<option id="com.atollic.truestudio.gcc.directories.select.103643637" name="Include path" superClass="com.atollic.truestudio.gcc.directories.select" useByScannerDiscovery="false" valueType="includePath">
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/CMSIS/Include}&quot;"/>
@@ -431,67 +181,67 @@
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/include}&quot;"/>
 									<listOptionValue builtIn="false" value="&quot;${workspace_loc:/${ProjName}/stm32f413-drivers/FreeRTOS/portable/GCC/ARM_CM4F}&quot;"/>
 								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.1736442025" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1126241915" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1165436507" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.688451684" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.972209725" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_garbage.1412705606" name="Prepare dead code removal " superClass="com.atollic.truestudio.gcc.optimization.prep_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.optimization.prep_data.1177941822" name="Prepare dead data removal" superClass="com.atollic.truestudio.gcc.optimization.prep_data" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gcc.misc.otherflags.689285126" name="Other options" superClass="com.atollic.truestudio.gcc.misc.otherflags" useByScannerDiscovery="false" value="" valueType="string"/>
-								<option id="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level.1144129117" name="Optimization Level" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level" useByScannerDiscovery="false" value="com.atollic.truestudio.gcc.optimization.level.00" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1185050323" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.gcc.input.1532989178" superClass="com.atollic.truestudio.gcc.input"/>
+								<option id="com.atollic.truestudio.common_options.target.endianess.1470465927" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
+								<option id="com.atollic.truestudio.common_options.target.mcpu.2058060296" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.instr_set.294337563" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpucore.299197187" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpu.2052946283" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.gcc.optimization.prep_garbage.1719103962" name="Prepare dead code removal " superClass="com.atollic.truestudio.gcc.optimization.prep_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.gcc.optimization.prep_data.1563035457" name="Prepare dead data removal" superClass="com.atollic.truestudio.gcc.optimization.prep_data" useByScannerDiscovery="false" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.gcc.misc.otherflags.1236542128" name="Other options" superClass="com.atollic.truestudio.gcc.misc.otherflags" useByScannerDiscovery="false" value="" valueType="string"/>
+								<option id="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level.1558791274" name="Optimization Level" superClass="com.atollic.truestudio.exe.debug.toolchain.gcc.optimization.level" useByScannerDiscovery="false" value="com.atollic.truestudio.gcc.optimization.level.00" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.interwork.1035580294" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
+								<inputType id="com.atollic.truestudio.gcc.input.2083841449" superClass="com.atollic.truestudio.gcc.input"/>
 							</tool>
-							<tool command="arm-atollic-eabi-gcc" commandLinePattern="${COMMAND} ${OUTPUT_FLAG} ${OUTPUT} ${INPUTS} ${FLAGS}" errorParsers="org.eclipse.cdt.core.GLDErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.ld.587331406" name="C Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ld">
-								<option id="com.atollic.truestudio.common_options.target.endianess.1039631967" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.1165434508" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.162595301" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1094372815" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.1947086908" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ld.general.scriptfile.2131770465" name="Linker script" superClass="com.atollic.truestudio.ld.general.scriptfile" useByScannerDiscovery="false" value="..\STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ld.optimization.do_garbage.451012497" name="Dead code removal " superClass="com.atollic.truestudio.ld.optimization.do_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ld.misc.genmapfile.37493488" name="Create map file" superClass="com.atollic.truestudio.ld.misc.genmapfile" useByScannerDiscovery="false"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1974916011" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
-								<inputType id="com.atollic.truestudio.ld.input.159702475" name="Input" superClass="com.atollic.truestudio.ld.input">
+							<tool command="arm-atollic-eabi-gcc" commandLinePattern="${COMMAND} ${OUTPUT_FLAG} ${OUTPUT} ${INPUTS} ${FLAGS}" errorParsers="org.eclipse.cdt.core.GLDErrorParser" id="com.atollic.truestudio.exe.debug.toolchain.ld.1409685507" name="C Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ld">
+								<option id="com.atollic.truestudio.common_options.target.endianess.2019102913" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess" useByScannerDiscovery="false"/>
+								<option id="com.atollic.truestudio.common_options.target.mcpu.113855626" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" useByScannerDiscovery="false" value="STM32F413RG" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.instr_set.1912143614" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpucore.2063814676" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpu.322916798" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" useByScannerDiscovery="false" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.ld.general.scriptfile.1783944796" name="Linker script" superClass="com.atollic.truestudio.ld.general.scriptfile" useByScannerDiscovery="false" value="..\STM32F413RG_FLASH.ld" valueType="string"/>
+								<option id="com.atollic.truestudio.ld.optimization.do_garbage.495637133" name="Dead code removal " superClass="com.atollic.truestudio.ld.optimization.do_garbage" useByScannerDiscovery="false" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.ld.misc.genmapfile.607915254" name="Create map file" superClass="com.atollic.truestudio.ld.misc.genmapfile" useByScannerDiscovery="false"/>
+								<option id="com.atollic.truestudio.common_options.target.interwork.435037099" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork" useByScannerDiscovery="false"/>
+								<inputType id="com.atollic.truestudio.ld.input.254004167" name="Input" superClass="com.atollic.truestudio.ld.input">
 									<additionalInput kind="additionalinputdependency" paths="$(USER_OBJS)"/>
 									<additionalInput kind="additionalinput" paths="$(LIBS)"/>
 								</inputType>
 							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.gpp.95424252" name="C++ Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gpp">
-								<option id="com.atollic.truestudio.gpp.symbols.defined.903823912" name="Defined symbols" superClass="com.atollic.truestudio.gpp.symbols.defined" valueType="definedSymbols">
+							<tool id="com.atollic.truestudio.exe.debug.toolchain.gpp.1319756120" name="C++ Compiler" superClass="com.atollic.truestudio.exe.debug.toolchain.gpp">
+								<option id="com.atollic.truestudio.gpp.symbols.defined.1753232289" name="Defined symbols" superClass="com.atollic.truestudio.gpp.symbols.defined" valueType="definedSymbols">
 									<listOptionValue builtIn="false" value="STM32F413xx"/>
 								</option>
-								<option id="com.atollic.truestudio.gpp.directories.select.1704299231" name="Include path" superClass="com.atollic.truestudio.gpp.directories.select" valueType="includePath">
+								<option id="com.atollic.truestudio.gpp.directories.select.359901245" name="Include path" superClass="com.atollic.truestudio.gpp.directories.select" valueType="includePath">
 									<listOptionValue builtIn="false" value="../src"/>
 									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Include"/>
 									<listOptionValue builtIn="false" value="../Drivers/CMSIS/Device/ST/STM32F4xx/Include"/>
 									<listOptionValue builtIn="false" value="../Drivers/STM32F4xx_HAL_Driver/Inc"/>
 								</option>
-								<option id="com.atollic.truestudio.common_options.target.endianess.741926818" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.3935574" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.661398633" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.363091283" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.600318532" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_garbage.398425043" name="Prepare dead code removal" superClass="com.atollic.truestudio.gpp.optimization.prep_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.prep_data.1231973457" name="Prepare dead data removal" superClass="com.atollic.truestudio.gpp.optimization.prep_data" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_rtti.532667036" name="Disable RTTI" superClass="com.atollic.truestudio.gpp.optimization.fno_rtti"/>
-								<option id="com.atollic.truestudio.gpp.optimization.fno_exceptions.1275335154" name="Disable exception handling" superClass="com.atollic.truestudio.gpp.optimization.fno_exceptions"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.1427491761" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
+								<option id="com.atollic.truestudio.common_options.target.endianess.1333889479" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
+								<option id="com.atollic.truestudio.common_options.target.mcpu.1501508148" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.instr_set.600591146" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpucore.1023299526" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpu.96303018" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.gpp.optimization.prep_garbage.808437306" name="Prepare dead code removal" superClass="com.atollic.truestudio.gpp.optimization.prep_garbage" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.gpp.optimization.prep_data.5588173" name="Prepare dead data removal" superClass="com.atollic.truestudio.gpp.optimization.prep_data" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.gpp.optimization.fno_rtti.1929625026" name="Disable RTTI" superClass="com.atollic.truestudio.gpp.optimization.fno_rtti"/>
+								<option id="com.atollic.truestudio.gpp.optimization.fno_exceptions.768316537" name="Disable exception handling" superClass="com.atollic.truestudio.gpp.optimization.fno_exceptions"/>
+								<option id="com.atollic.truestudio.common_options.target.interwork.1106677963" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
 							</tool>
-							<tool id="com.atollic.truestudio.exe.debug.toolchain.ldcc.2131447331" name="C++ Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ldcc">
-								<option id="com.atollic.truestudio.common_options.target.endianess.1287018779" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
-								<option id="com.atollic.truestudio.common_options.target.mcpu.83609036" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.instr_set.1026545273" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpucore.1379701654" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.common_options.target.fpu.137282527" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
-								<option id="com.atollic.truestudio.ldcc.optimization.do_garbage.1807182635" name="Dead code removal" superClass="com.atollic.truestudio.ldcc.optimization.do_garbage" value="true" valueType="boolean"/>
-								<option id="com.atollic.truestudio.ldcc.general.scriptfile.1560695164" name="Linker script" superClass="com.atollic.truestudio.ldcc.general.scriptfile" value="../Release_STM32F413RG_FLASH.ld" valueType="string"/>
-								<option id="com.atollic.truestudio.ldcc.misc.genmapfile.611011621" name="Create map file" superClass="com.atollic.truestudio.ldcc.misc.genmapfile"/>
-								<option id="com.atollic.truestudio.common_options.target.interwork.788334987" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
+							<tool id="com.atollic.truestudio.exe.debug.toolchain.ldcc.507118172" name="C++ Linker" superClass="com.atollic.truestudio.exe.debug.toolchain.ldcc">
+								<option id="com.atollic.truestudio.common_options.target.endianess.1620766940" name="Endianess" superClass="com.atollic.truestudio.common_options.target.endianess"/>
+								<option id="com.atollic.truestudio.common_options.target.mcpu.853487833" name="Microcontroller" superClass="com.atollic.truestudio.common_options.target.mcpu" value="STM32F413RG" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.instr_set.1805085653" name="Instruction set" superClass="com.atollic.truestudio.common_options.target.instr_set" value="com.atollic.truestudio.common_options.target.instr_set.thumb2" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpucore.1157646438" name="FPU" superClass="com.atollic.truestudio.common_options.target.fpucore" value="com.atollic.truestudio.common_options.target.fpucore.fpv4-sp-d16" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.common_options.target.fpu.29584099" name="Floating point" superClass="com.atollic.truestudio.common_options.target.fpu" value="com.atollic.truestudio.common_options.target.fpu.hard" valueType="enumerated"/>
+								<option id="com.atollic.truestudio.ldcc.optimization.do_garbage.558416453" name="Dead code removal" superClass="com.atollic.truestudio.ldcc.optimization.do_garbage" value="true" valueType="boolean"/>
+								<option id="com.atollic.truestudio.ldcc.general.scriptfile.794201171" name="Linker script" superClass="com.atollic.truestudio.ldcc.general.scriptfile" value="../Release_STM32F413RG_FLASH.ld" valueType="string"/>
+								<option id="com.atollic.truestudio.ldcc.misc.genmapfile.1876169313" name="Create map file" superClass="com.atollic.truestudio.ldcc.misc.genmapfile"/>
+								<option id="com.atollic.truestudio.common_options.target.interwork.1376515107" name="Mix ARM/Thumb" superClass="com.atollic.truestudio.common_options.target.interwork"/>
 							</tool>
-							<tool id="com.atollic.truestudio.ar.base.1934514103" name="Archiver" superClass="com.atollic.truestudio.ar.base"/>
-							<tool command="arm-atollic-reports.jar" commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS}" errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.secoutput.313422784" name="Other" superClass="com.atollic.truestudio.exe.debug.toolchain.secoutput"/>
+							<tool id="com.atollic.truestudio.ar.base.399572724" name="Archiver" superClass="com.atollic.truestudio.ar.base"/>
+							<tool command="arm-atollic-reports.jar" commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS}" errorParsers="" id="com.atollic.truestudio.exe.debug.toolchain.secoutput.1554760934" name="Other" superClass="com.atollic.truestudio.exe.debug.toolchain.secoutput"/>
 						</toolChain>
 					</folderInfo>
 					<sourceEntries>
@@ -507,6 +257,10 @@
 	</storageModule>
 	<storageModule moduleId="org.eclipse.cdt.core.LanguageSettingsProviders"/>
 	<storageModule moduleId="refreshScope" versionNumber="2">
+		<configuration configurationName="Pump_Debug"/>
+		<configuration configurationName="Fan_Release"/>
+		<configuration configurationName="Pump_Release"/>
+		<configuration configurationName="Fan_Debug"/>
 		<configuration configurationName="Release"/>
 		<configuration configurationName="Debug"/>
 	</storageModule>
diff --git a/.gitignore b/.gitignore
index 01d1aab..c9c3dd4 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,5 +1,5 @@
 Release/
-Debug/
+PTC_Debug/
 .settings/
 *.ld
 *.launch
@@ -8,3 +8,6 @@ html/
 *.warn
 /Pump_Release/
 /Fan_Debug/
+
+Pump_Debug/*
+Fan_Debug/*
diff --git a/PTC_Debug/adc.su b/PTC_Debug/adc.su
new file mode 100644
index 0000000..10b91e9
--- /dev/null
+++ b/PTC_Debug/adc.su
@@ -0,0 +1,2 @@
+adc.c:126:6:adcInit	8	static
+adc.c:142:10:adcRead	16	static
diff --git a/PTC_Debug/stm32f413-drivers/CMR/spi.su b/PTC_Debug/stm32f413-drivers/CMR/spi.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/FreeRTOS/croutine.o b/PTC_Debug/stm32f413-drivers/FreeRTOS/croutine.o
new file mode 100644
index 0000000..6725eec
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/FreeRTOS/croutine.o differ
diff --git a/PTC_Debug/stm32f413-drivers/FreeRTOS/croutine.su b/PTC_Debug/stm32f413-drivers/FreeRTOS/croutine.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/FreeRTOS/event_groups.su b/PTC_Debug/stm32f413-drivers/FreeRTOS/event_groups.su
new file mode 100644
index 0000000..ed3cb55
--- /dev/null
+++ b/PTC_Debug/stm32f413-drivers/FreeRTOS/event_groups.su
@@ -0,0 +1,10 @@
+event_groups.c:135:21:xEventGroupCreateStatic	24	static
+event_groups.c:208:13:xEventGroupSync	48	static
+event_groups.c:324:13:xEventGroupWaitBits	56	static
+event_groups.c:472:13:xEventGroupClearBits	24	static
+event_groups.c:514:13:xEventGroupGetBitsFromISR	40	static
+event_groups.c:530:13:xEventGroupSetBits	56	static
+event_groups.c:624:6:vEventGroupDelete	24	static
+event_groups.c:668:6:vEventGroupSetBitsCallback	16	static
+event_groups.c:676:6:vEventGroupClearBitsCallback	16	static
+event_groups.c:682:19:prvTestWaitCondition	32	static
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.o
new file mode 100644
index 0000000..b8f0d8d
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.su
new file mode 100644
index 0000000..ac6c4c5
--- /dev/null
+++ b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_cortex.su
@@ -0,0 +1,32 @@
+core_cm4.h:1657:22:__NVIC_SetPriorityGrouping	24	static
+core_cm4.h:1676:26:__NVIC_GetPriorityGrouping	4	static
+core_cm4.h:1688:22:__NVIC_EnableIRQ	16	static
+core_cm4.h:1724:22:__NVIC_DisableIRQ	16	static
+core_cm4.h:1743:26:__NVIC_GetPendingIRQ	16	static
+core_cm4.h:1762:22:__NVIC_SetPendingIRQ	16	static
+core_cm4.h:1777:22:__NVIC_ClearPendingIRQ	16	static
+core_cm4.h:1794:26:__NVIC_GetActive	16	static
+core_cm4.h:1816:22:__NVIC_SetPriority	16	static
+core_cm4.h:1838:26:__NVIC_GetPriority	16	static
+core_cm4.h:1863:26:NVIC_EncodePriority	40	static
+core_cm4.h:1890:22:NVIC_DecodePriority	40	static
+core_cm4.h:1939:34:__NVIC_SystemReset	4	static
+core_cm4.h:2022:26:SysTick_Config	16	static
+stm32f4xx_hal_cortex.c:143:6:HAL_NVIC_SetPriorityGrouping	16	static
+stm32f4xx_hal_cortex.c:165:6:HAL_NVIC_SetPriority	32	static
+stm32f4xx_hal_cortex.c:187:6:HAL_NVIC_EnableIRQ	16	static
+stm32f4xx_hal_cortex.c:203:6:HAL_NVIC_DisableIRQ	16	static
+stm32f4xx_hal_cortex.c:216:6:HAL_NVIC_SystemReset	8	static
+stm32f4xx_hal_cortex.c:229:10:HAL_SYSTICK_Config	16	static
+stm32f4xx_hal_cortex.c:258:6:HAL_MPU_Disable	4	static
+stm32f4xx_hal_cortex.c:281:6:HAL_MPU_Enable	16	static
+stm32f4xx_hal_cortex.c:300:6:HAL_MPU_ConfigRegion	16	static
+stm32f4xx_hal_cortex.c:344:10:HAL_NVIC_GetPriorityGrouping	8	static
+stm32f4xx_hal_cortex.c:371:6:HAL_NVIC_GetPriority	24	static
+stm32f4xx_hal_cortex.c:386:6:HAL_NVIC_SetPendingIRQ	16	static
+stm32f4xx_hal_cortex.c:404:10:HAL_NVIC_GetPendingIRQ	16	static
+stm32f4xx_hal_cortex.c:420:6:HAL_NVIC_ClearPendingIRQ	16	static
+stm32f4xx_hal_cortex.c:437:10:HAL_NVIC_GetActive	16	static
+stm32f4xx_hal_cortex.c:454:6:HAL_SYSTICK_CLKSourceConfig	16	static
+stm32f4xx_hal_cortex.c:472:6:HAL_SYSTICK_IRQHandler	8	static
+stm32f4xx_hal_cortex.c:481:13:HAL_SYSTICK_Callback	4	static
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_dcmi_ex.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_dcmi_ex.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_exti.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_exti.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_gpio.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_gpio.su
new file mode 100644
index 0000000..cf27ac9
--- /dev/null
+++ b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_gpio.su
@@ -0,0 +1,8 @@
+stm32f4xx_hal_gpio.c:171:6:HAL_GPIO_Init	40	static
+stm32f4xx_hal_gpio.c:296:6:HAL_GPIO_DeInit	32	static
+stm32f4xx_hal_gpio.c:377:15:HAL_GPIO_ReadPin	24	static
+stm32f4xx_hal_gpio.c:412:6:HAL_GPIO_WritePin	16	static
+stm32f4xx_hal_gpio.c:435:6:HAL_GPIO_TogglePin	16	static
+stm32f4xx_hal_gpio.c:461:19:HAL_GPIO_LockPin	24	static
+stm32f4xx_hal_gpio.c:494:6:HAL_GPIO_EXTI_IRQHandler	16	static
+stm32f4xx_hal_gpio.c:509:13:HAL_GPIO_EXTI_Callback	16	static
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_hash.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_hash.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_i2c.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_i2c.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_i2s.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_i2s.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_ltdc.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_ltdc.o
new file mode 100644
index 0000000..12a789a
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_ltdc.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_ltdc.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_ltdc.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_mmc.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_mmc.o
new file mode 100644
index 0000000..8585516
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_mmc.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_mmc.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_mmc.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_sai_ex.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_sai_ex.o
new file mode 100644
index 0000000..884e33c
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_sai_ex.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_sai_ex.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_sai_ex.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_spi.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_spi.o
new file mode 100644
index 0000000..c1c0eaf
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_spi.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_spi.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_spi.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_wwdg.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_hal_wwdg.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_gpio.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_gpio.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_rng.o b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_rng.o
new file mode 100644
index 0000000..0ee2864
Binary files /dev/null and b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_rng.o differ
diff --git a/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_rng.su b/PTC_Debug/stm32f413-drivers/HAL/Src/stm32f4xx_ll_rng.su
new file mode 100644
index 0000000..e69de29
diff --git a/PTC_Debug/thermistor_table.o b/PTC_Debug/thermistor_table.o
new file mode 100644
index 0000000..595894b
Binary files /dev/null and b/PTC_Debug/thermistor_table.o differ
diff --git a/PTC_Debug/thermistor_table.su b/PTC_Debug/thermistor_table.su
new file mode 100644
index 0000000..e69de29
diff --git a/adc.c b/adc.c
index 3adfb86..27f50ec 100644
--- a/adc.c
+++ b/adc.c
@@ -108,6 +108,13 @@ static cmr_adcChannel_t adcChannels[ADC_LEN] = {
         .samplingTime = ADC_SAMPLETIME_15CYCLES,
         .value = 0
     },
+    [ADC_THERM_9] = { // This is new to 22e
+        .channel = ADC_CHANNEL_0,
+        .port = GPIOC,
+        .pin = GPIO_PIN_1,
+        .samplingTime = ADC_SAMPLETIME_15CYCLES,
+        .value = 0
+    },
 };
 
 /** @brief Primary ADC. */
diff --git a/adc.h b/adc.h
index 9717e08..545e391 100644
--- a/adc.h
+++ b/adc.h
@@ -30,6 +30,7 @@ typedef enum {
     ADC_THERM_6,        /**< @brief cooling loop thermistor 6.   */
     ADC_THERM_7,        /**< @brief cooling loop thermistor 7.   */
     ADC_THERM_8,        /**< @brief cooling loop thermistor 8.   */
+    ADC_THERM_9,        /**< @brief cooling loop thermistor 9.   */
     ADC_LEN     /**< @brief Total ADC channels. */
 } adcChannel_t;
 
diff --git a/can.c b/can.c
index 3af47a1..c3a9b46 100644
--- a/can.c
+++ b/can.c
@@ -85,9 +85,10 @@ cmr_canRXMeta_t canRXMeta[] = {
 cmr_canHeartbeat_t heartbeat;
 
 /** @brief Fan/Pump channel states. */
-uint16_t channel_1_State;
-uint16_t channel_2_State;
-uint16_t channel_3_State;
+uint16_t fan_1_State;
+uint16_t fan_2_State;
+uint16_t pump_1_State;
+uint16_t pump_2_State;
 
 /** @brief CAN 10 Hz TX priority. */
 static const uint32_t canTX10Hz_priority = 3;
@@ -158,6 +159,7 @@ void canInit(void) {
     // CAN2 initialization.
     cmr_canInit(
         &can, CAN1,
+		CMR_CAN_BITRATE_500K,
         canRXMeta, sizeof(canRXMeta) / sizeof(canRXMeta[0]),
         NULL,
         GPIOA, GPIO_PIN_11,     // CAN2 RX port/pin.
@@ -183,7 +185,7 @@ void canInit(void) {
                 CMR_CANID_VSM_STATUS,
                 CMR_CANID_VSM_STATUS,
                 CMR_CANID_VSM_SENSORS,
-                CMR_CANID_HVC_MINMAX_CELL_TEMPS                                                                                 ,
+                CMR_CANID_HVC_MINMAX_CELL_TEMPS
             }
         }
     };
@@ -250,14 +252,17 @@ static void sendHeartbeat(TickType_t lastWakeTime) {
 
     uint16_t error = CMR_CAN_ERROR_NONE;
 
+    //or the water overheating bit 
+
     if (cmr_canRXMetaTimeoutError(heartbeatVSMMeta, lastWakeTime) < 0) {
         error |= CMR_CAN_ERROR_VSM_TIMEOUT;
     }
 
+    // If error exists, update heartbeat to error state (i.e. update its fields). See can_types.h for the fields.
     if (error != CMR_CAN_ERROR_NONE) {
-        heartbeat.state = CMR_CAN_ERROR;
+        heartbeat.state = CMR_CAN_ERROR; //Field 1 update
     }
-    memcpy(&heartbeat.error, &error, sizeof(error));
+    memcpy(&heartbeat.error, &error, sizeof(error)); //Field 2 update
 
     uint16_t warning = CMR_CAN_WARN_NONE;
     if (cmr_canRXMetaTimeoutWarn(heartbeatVSMMeta, lastWakeTime) < 0) {
@@ -312,14 +317,17 @@ static void sendCoolingLoopTemps(void) {
  * @brief Send Fan or Pump status information.
  */
 static void sendDriverStatus(void) {
-    uint8_t Channel1_Duty_Cycle_pcnt = channel_1_State;
-    uint8_t Channel2_Duty_Cycle_pcnt = channel_2_State;
-    uint8_t Channel3_Duty_Cycle_pcnt = channel_3_State;
+    uint8_t Fan1_Duty_Cycle_pcnt = fan_1_State;
+    uint8_t Fan2_Duty_Cycle_pcnt = fan_2_State;
+    uint8_t Pump1_Duty_Cycle_pcnt = pump_1_State;
+    uint8_t Pump2_Duty_Cycle_pcnt = pump_2_State;
+
 
     cmr_canPTCDriverStatus_t driverStatusMsg = {
-        .channel1DutyCycle_pcnt = Channel1_Duty_Cycle_pcnt,
-        .channel2DutyCycle_pcnt = Channel2_Duty_Cycle_pcnt,
-        .channel3DutyCycle_pcnt = Channel3_Duty_Cycle_pcnt
+        .fan1DutyCycle_pcnt = Fan1_Duty_Cycle_pcnt,
+        .fan2DutyCycle_pcnt = Fan2_Duty_Cycle_pcnt,
+        .pump1DutyCycle_pcnt = Pump1_Duty_Cycle_pcnt,
+        .pump2DutyCycle_pcnt = Pump2_Duty_Cycle_pcnt
     };
 
     canTX(CMR_CANID_STATUS_PTCx, &driverStatusMsg, sizeof(driverStatusMsg), canTX10Hz_period_ms);
diff --git a/can.h b/can.h
index ffd787b..1b85525 100644
--- a/can.h
+++ b/can.h
@@ -32,9 +32,12 @@ extern cmr_canRXMeta_t canRXMeta[];
 
 extern cmr_canHeartbeat_t heartbeat;
 
-extern uint16_t channel_1_State;
-extern uint16_t channel_2_State;
-extern uint16_t channel_3_State;
+extern uint16_t fan_1_State;
+extern uint16_t fan_2_State;
+extern uint16_t pump_1_State;
+extern uint16_t pump_2_State;
+
+
 
 void canInit(void);
 
diff --git a/fans.c b/fans.c
index 10f2ace..7688f39 100644
--- a/fans.c
+++ b/fans.c
@@ -10,11 +10,13 @@
 #include "fans.h"        // Interface to implement
 #include <CMR/pwm.h>        // PWM interface
 #include <CMR/gpio.h>       // GPIO interface
+#include <CMR/sensors.h>       // Sensors interface
+#include "sensors.h"
+
 
 /** @brief PWM driver state. */
-static cmr_pwm_t channel_1_PWM;
-static cmr_pwm_t channel_2_PWM;
-static cmr_pwm_t channel_3_PWM;
+static cmr_pwm_t fan_1_PWM;
+static cmr_pwm_t fan_2_PWM;
 
 /** @brief Fan control task priority. */
 static const uint32_t fanControl_priority = 4;
@@ -23,6 +25,51 @@ static const TickType_t fanControl_period_ms = 50;
 /** @brief Fan control task. */
 static cmr_task_t fanControl_task;
 
+#define INVERTER_SCALE  (3.5)
+#define INVERTER_OFFSET (-57.5)
+//#define ACCUM_SCALE     (2.3) //Doesn't get to 100 fan speed. Tune this value during testing. TODO
+#define ACCUM_OFFSET    (-1930) // And this one. TODO
+
+//extern cmr_sensor_t *sensors;
+
+uint16_t accum_temp;
+uint16_t inverter_temp;
+
+
+
+//TODO: 
+/*
+
+    // power errors(shunt resistor), water over heating errors, oil overheatin errors
+    // no oil overheating errors cuz going into uprights
+    // temperature 
+    // pump always on 35 c  
+    // pump turn on at 53 start turning on and 56 turning at 100
+    // fan turn on at 56 starting 58 turn it to max
+    change the values from looking at the loop
+    2 loops -> 1 for motor inverter pump fan radiat, 1 for accumulator
+    There are two loops
+        one for motor inverter  -> radiator, pump, fan
+        one accumulator -> radiator, pump, fan
+    2 thermistors surrounding each radiator
+    2 thermistors surrounding the inverter
+
+        // pump turn on at 53 start turning on and 56 turning at 100
+    // fan turn on at 56 starting 58 turn it to max
+
+    First, we should try to read the temperature data from the amk's for inverter and accumulator to turn on the pumps and the fans. 
+    If it doesn't work, then just use the avg the temperatures surrounding the inverter and accumulator loops. 
+    Don't send errors. Send warnings. 
+
+    1. fix the temperature readings, from amk to turn on the pumps and fans
+    2. add warning checking 
+    3. fix the 53, 56 values
+
+    tune values of linear function?
+    check implmentation of thermistor read values to celsius? do we hve to worry about that?
+    can ?? hasn't been decided on
+*/
+
 /**
  * @brief Task for controlling the fans.
  *
@@ -34,13 +81,13 @@ static void fanControl(void *pvParameters) {
     (void) pvParameters;    // Placate compiler.
 
     /* Enable the half bridges so that output isn't floating */
-    cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-    cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-    cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+    cmr_gpioWrite(GPIO_FAN_1_ENABLE, 1);
+    cmr_gpioWrite(GPIO_FAN_2_ENABLE, 1);
+   
 
     /* Get reference to VSM Heartbeat and accumulator min/max cell temperatures */
-    volatile cmr_canHeartbeat_t *vsmHeartbeat = canGetPayload(CANRX_HEARTBEAT_VSM);
-    //volatile cmr_canHVCPackMinMaxCellTemps_t *minMaxTemps = canGetPayload(CANRX_HVC_MINMAX_TEMPS);
+    // volatile cmr_canHeartbeat_t *vsmHeartbeat = canGetPayload(CANRX_HEARTBEAT_VSM);
+    // volatile cmr_canHVCPackMinMaxCellTemps_t *minMaxTemps = canGetPayload(CANRX_HVC_MINMAX_TEMPS);
 
     //cmr_canHeartbeat_t *heartbeat = &heartbeat;
 
@@ -48,68 +95,75 @@ static void fanControl(void *pvParameters) {
     /* 96Mhz / (24 * 160) = 25kHz */
     const cmr_pwmPinConfig_t pwmPinConfig1 = {
         .port = GPIOB,
-        .pin = GPIO_PIN_5,
-        .channel = TIM_CHANNEL_2,
+        .pin = GPIO_PIN_4,
+        .channel = TIM_CHANNEL_1,
         .presc = 24,
         .period_ticks = 160,
         .timer = TIM3
     };
     const cmr_pwmPinConfig_t pwmPinConfig2 = {
         .port = GPIOB,
-        .pin = GPIO_PIN_7,
+        .pin = GPIO_PIN_5,
         .channel = TIM_CHANNEL_2,
         .presc = 24,
         .period_ticks = 160,
-        .timer = TIM4
-    };
-    const cmr_pwmPinConfig_t pwmPinConfig3 = {
-        .port = GPIOB,
-        .pin = GPIO_PIN_8,
-        .channel = TIM_CHANNEL_3,
-        .presc = 24,
-        .period_ticks = 160,
-        .timer = TIM4
+        .timer = TIM3
     };
-    cmr_pwmInit(&channel_1_PWM, &pwmPinConfig1);
-    cmr_pwmInit(&channel_2_PWM, &pwmPinConfig2);
-    cmr_pwmInit(&channel_3_PWM, &pwmPinConfig3);
+
+    cmr_pwmInit(&fan_1_PWM, &pwmPinConfig1);
+    cmr_pwmInit(&fan_2_PWM, &pwmPinConfig2);
 
     TickType_t lastWakeTime = xTaskGetTickCount();
     while (1) {
 
         switch (heartbeat.state) {
+            case CMR_CAN_HV_EN: // hv pump enable same as rtd pump enable
             case CMR_CAN_RTD:
-                channel_1_State = 100;
-                channel_2_State = 100;
-                channel_3_State = 100;
-                cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
-                break;
-            case CMR_CAN_HV_EN:
-                channel_1_State = 50;
-                channel_2_State = 50;
-                channel_3_State = 50;
-                cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+            {
+            	//int accum_temp = (cmr_sensorListGetValue(sensors, SENSOR_CH_THERM_1) + cmr_sensorListGetValue(sensors, SENSOR_CH_THERM_2)) / 2;
+                // Below: revision - using CAN to get data from HVC
+                //Next line's citation: from what nsaizan wrote in this file above
+                cmr_canHVCPackMinMaxCellTemps_t *minMaxTemps = canGetPayload(CANRX_HVC_MINMAX_TEMPS);
+                // Use the temperature of the hottest cell as the AC's temperature
+                uint16_t accum_temp = minMaxTemps->maxCellTemp_dC;
+
+
+                //55C assumed high temperature, 25C assumed low temperature
+                // ^ in dC: 550 dC and 250 dC
+                //30 min speed, 100 max speed
+                //a(accum_temp) + b = fan_speed
+                fan_1_State = (accum_temp * 7 / 2) + ACCUM_OFFSET;
+               
+                int inverter_temp = (cmr_sensorListGetValue(&sensorList, SENSOR_CH_THERM_3) + cmr_sensorListGetValue(&sensorList, SENSOR_CH_THERM_4)) / 2;
+                // 45C assumed high temperature (50C inverter starts to derate), 25C assumed low temperature
+                // 30 min speed, 100 max speed 
+                // a(inverter_temp) + b = fan speed 
+                fan_2_State = (inverter_temp*INVERTER_SCALE) + INVERTER_OFFSET;
+
+                cmr_pwmSetDutyCycle(&fan_1_PWM, (uint32_t) fan_1_State);
+                cmr_pwmSetDutyCycle(&fan_2_PWM, (uint32_t) fan_2_State);
+                cmr_gpioWrite(GPIO_FAN_1_ENABLE, 1);
+                cmr_gpioWrite(GPIO_FAN_2_ENABLE, 1);
                 break;
+
+            // case CMR_CAN_HV_EN:
+            //     //we need to change this also 
+
+            //     fan_1_State = 50;
+            //     fan_2_State = 50;
+            //     cmr_pwmSetDutyCycle(&fan_1_PWM, fan_1_State);
+            //     cmr_pwmSetDutyCycle(&fan_2_PWM, fan_2_State);
+            //     cmr_gpioWrite(GPIO_FAN_1_ENABLE, 1);
+            //     cmr_gpioWrite(GPIO_FAN_2_ENABLE, 1);
+            //     break;
+        	}
             default:
-                channel_1_State = 0;
-                channel_2_State = 0;
-                channel_3_State = 0;
-                cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+                fan_1_State = 0;
+                fan_2_State = 0;
+                cmr_pwmSetDutyCycle(&fan_1_PWM, fan_1_State);
+                cmr_pwmSetDutyCycle(&fan_2_PWM, fan_2_State);
+                cmr_gpioWrite(GPIO_FAN_1_ENABLE, 1);
+                cmr_gpioWrite(GPIO_FAN_2_ENABLE, 1);
                 break;
         }
 
diff --git a/gpio.c b/gpio.c
index 422a4fd..87cdde0 100644
--- a/gpio.c
+++ b/gpio.c
@@ -21,7 +21,7 @@
  * @see `stm32f4xx_hal_gpio.h` for various initialization values.
  */
 static const cmr_gpioPinConfig_t gpioPinConfigs[GPIO_LEN] = {
-    [GPIO_LED_STATUS] = {
+    [GPIO_LED_STATUS] = { //same as IND BLUE on schematic (no change)
         .port = GPIOB,
         .init = {
             .Pin = GPIO_PIN_12,
@@ -39,8 +39,26 @@ static const cmr_gpioPinConfig_t gpioPinConfigs[GPIO_LEN] = {
             .Speed = GPIO_SPEED_FREQ_LOW
         }
     },
-    [GPIO_CHANNEL_1_ENABLE] = {
-        .port = GPIOC,
+    [GPIO_FAN_1_ENABLE] = { // FAN 1
+        .port = GPIOB,
+        .init = {
+            .Pin = GPIO_PIN_4,
+            .Mode = GPIO_MODE_OUTPUT_PP,
+            .Pull = GPIO_NOPULL,
+            .Speed = GPIO_SPEED_FREQ_LOW
+        }
+    },
+    [GPIO_FAN_2_ENABLE] = { // FAN 2
+        .port = GPIOB,
+        .init = {
+            .Pin = GPIO_PIN_5,
+            .Mode = GPIO_MODE_OUTPUT_PP,
+            .Pull = GPIO_NOPULL,
+            .Speed = GPIO_SPEED_FREQ_LOW
+        }
+    },
+    [GPIO_PUMP_1_ENABLE] = { // PUMP 1
+        .port = GPIOB,
         .init = {
             .Pin = GPIO_PIN_7,
             .Mode = GPIO_MODE_OUTPUT_PP,
@@ -48,8 +66,8 @@ static const cmr_gpioPinConfig_t gpioPinConfigs[GPIO_LEN] = {
             .Speed = GPIO_SPEED_FREQ_LOW
         }
     },
-    [GPIO_CHANNEL_2_ENABLE] = {
-        .port = GPIOC,
+    [GPIO_PUMP_2_ENABLE] = { // PUMP 2
+        .port = GPIOB,
         .init = {
             .Pin = GPIO_PIN_8,
             .Mode = GPIO_MODE_OUTPUT_PP,
@@ -57,16 +75,16 @@ static const cmr_gpioPinConfig_t gpioPinConfigs[GPIO_LEN] = {
             .Speed = GPIO_SPEED_FREQ_LOW
         }
     },
-    [GPIO_CHANNEL_3_ENABLE] = {
+    [GPIO_AUXILIARY_ENABLE] = { // AUXILIARY ENABLE
         .port = GPIOC,
         .init = {
-            .Pin = GPIO_PIN_9,
+            .Pin = GPIO_PIN_7,
             .Mode = GPIO_MODE_OUTPUT_PP,
             .Pull = GPIO_NOPULL,
             .Speed = GPIO_SPEED_FREQ_LOW
         }
     },
-    [GPIO_MTR_CTRL_ENABLE] = {
+    [GPIO_MTR_CTRL_ENABLE] = { 
         .port = GPIOC,
         .init = {
             .Pin = GPIO_PIN_10,
diff --git a/gpio.h b/gpio.h
index 5b51707..86b0264 100644
--- a/gpio.h
+++ b/gpio.h
@@ -17,9 +17,11 @@
 typedef enum {
     GPIO_LED_STATUS = 0,    /**< @brief Status LED. */
     GPIO_BRKLT_ENABLE,      /**< @brief Brakelight Enable. */
-    GPIO_CHANNEL_1_ENABLE,         /**< @brief Fan/Pump Channel 1 Enable. */
-    GPIO_CHANNEL_2_ENABLE,         /**< @brief Fan/Pump Channel 2 Enable. */
-    GPIO_CHANNEL_3_ENABLE,         /**< @brief Fan/Pump Channel 3 Enable. */
+    GPIO_FAN_1_ENABLE,         /**< @brief Fan/Pump FAN 1 Enable. */
+    GPIO_FAN_2_ENABLE,         /**< @brief Fan/Pump FAN 2 Enable. */
+    GPIO_PUMP_1_ENABLE,         /**< @brief Fan/Pump PUMP 1 Enable. */
+    GPIO_PUMP_2_ENABLE,         /**< @brief Fan/Pump PUMP 2 Enable. */
+    GPIO_AUXILIARY_ENABLE,  /**< @brief Auxiliary Enable. */
     GPIO_MTR_CTRL_ENABLE,   /**< @brief Motor Controller Power Enable */
     GPIO_MC_EFUSE_AUTO,     /**< @brief Motor Controller eFuse Auto Reset
                                              (high=latching, low=autoreset*/
diff --git a/main.c b/main.c
index f82e926..5eaff0b 100644
--- a/main.c
+++ b/main.c
@@ -107,24 +107,11 @@ int main(void) {
         NULL
     );
 
-#ifndef CMR_PTC_ID
-#error "No PTC ID defined!"
-#elif (CMR_PTC_ID == 0) /* Pump Control Board */
-
     mcPowerInit();
     brakelightInit();
     pumpInit();
-
-#elif (CMR_PTC_ID == 1) /* Fan Control Board */
-
     fanInit();
 
-#else
-
-    #pragma warning "CMR_PTC_ID is not a valid value!"
-
-#endif
-
     vTaskStartScheduler();
     cmr_panic("vTaskStartScheduler returned!");
 }
diff --git a/mc_power.c b/mc_power.c
index dd20450..7d7a961 100644
--- a/mc_power.c
+++ b/mc_power.c
@@ -31,23 +31,25 @@ static void mcPowerControl(void *pvParameters) {
 
     /* Get reference to VSM Heartbeat */
     volatile cmr_canHeartbeat_t *vsmHeartbeat = canGetPayload(CANRX_HEARTBEAT_VSM);
+    volatile cmr_canVSMStatus_t *vsmState = canGetPayload(CANRX_VSM_STATUS);
 
     cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 0);
     cmr_gpioWrite(GPIO_MC_EFUSE_AUTO, 0);
 
     TickType_t lastWakeTime = xTaskGetTickCount();
     while (1) {
-        switch (heartbeat.state) {
-            case CMR_CAN_RTD:
-                cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 1);
-                break;
-            case CMR_CAN_HV_EN:
-                cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 1);         // This code is subject to change, giving mc 600V before logic voltage is spooky.
-                break;                                          // Proposed solution:
-            default:                                            // VSM sends ping to PTC to turn on mc logic voltage
-                cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 0);         // after VSM sees MC can data via CDC it does precharge
-                break;
+        // Inverter should be powered if the car is in HV_EN, RTD, or the
+        // VSM is attempting to boot the inverter in it's internal state
+        if (vsmHeartbeat->state == CMR_CAN_HV_EN ||
+            vsmHeartbeat->state == CMR_CAN_RTD || 
+            vsmState->internalState == CMR_CAN_VSM_STATE_INVERTER_EN ||
+            vsmState->internalState == CMR_CAN_VSM_STATE_HV_EN) 
+        {
+            cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 1);
+        } else {
+            cmr_gpioWrite(GPIO_MTR_CTRL_ENABLE, 0);
         }
+
         vTaskDelayUntil(&lastWakeTime, mcPowerControl_period_ms);
     }
 }
diff --git a/pumps.c b/pumps.c
index 40eec24..bcfed49 100644
--- a/pumps.c
+++ b/pumps.c
@@ -10,11 +10,12 @@
 #include "fans.h"        // Interface to implement
 #include <CMR/pwm.h>        // PWM interface
 #include <CMR/gpio.h>       // GPIO interface
+#include <CMR/sensors.h>       // Sensors interface
+#include "sensors.h"
 
 /** @brief PWM driver state. */
-static cmr_pwm_t channel_1_PWM;
-static cmr_pwm_t channel_2_PWM;
-static cmr_pwm_t channel_3_PWM;
+static cmr_pwm_t pump_1_PWM;
+static cmr_pwm_t pump_2_PWM;
 
 /** @brief Pump control task priority. */
 static const uint32_t pumpControl_priority = 4;
@@ -23,6 +24,16 @@ static const TickType_t pumpControl_period_ms = 50;
 /** @brief Pump control task. */
 static cmr_task_t pumpControl_task;
 
+#define INVERTER_SCALE  (3.5)
+#define INVERTER_OFFSET (-57.5)
+//#define ACCUM_SCALE     (2.3) //Doesn't get to 100 fan speed. Tune this value during testing. TODO
+#define ACCUM_OFFSET    (-28.3) // And this one. TODO
+
+//extern cmr_sensor_t *sensors;
+
+uint16_t accum_temp;
+uint16_t inverter_temp;
+
 /**
  * @brief Task for controlling the pumps.
  *
@@ -34,17 +45,17 @@ static void pumpControl(void *pvParameters) {
     (void) pvParameters;    // Placate compiler.
 
     /* Enable the half bridges so that output isn't floating */
-        cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-        cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-        cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+        cmr_gpioWrite(GPIO_PUMP_1_ENABLE, 1);
+        cmr_gpioWrite(GPIO_PUMP_2_ENABLE, 1);
 
         /* Get reference to VSM Heartbeat */
-        volatile cmr_canHeartbeat_t *vsmHeartbeat = canGetPayload(CANRX_HEARTBEAT_VSM);
+        // volatile cmr_canHeartbeat_t *vsmHeartbeat = canGetPayload(CANRX_HEARTBEAT_VSM);
 
         //cmr_canHeartbeat_t *heartbeat = &heartbeat;
 
         /* Initialize PWM channels to 25kHz for fan control lines */
         /* 96Mhz / (24 * 40000) = 100Hz */
+        /*
         const cmr_pwmPinConfig_t pwmPinConfig1 = {
             .port = GPIOB,
             .pin = GPIO_PIN_5,
@@ -53,62 +64,75 @@ static void pumpControl(void *pvParameters) {
             .period_ticks = 40000,
             .timer = TIM3
         };
-        const cmr_pwmPinConfig_t pwmPinConfig2 = {
+        */
+        const cmr_pwmPinConfig_t pwmPinConfig1 = {
             .port = GPIOB,
             .pin = GPIO_PIN_7,
-            .channel = TIM_CHANNEL_2,
+            .channel = TIM_CHANNEL_2, //TODO
             .presc = 24,
             .period_ticks = 40000,
             .timer = TIM4
         };
-        const cmr_pwmPinConfig_t pwmPinConfig3 = {
+        const cmr_pwmPinConfig_t pwmPinConfig2 = {
             .port = GPIOB,
             .pin = GPIO_PIN_8,
-            .channel = TIM_CHANNEL_3,
+            .channel = TIM_CHANNEL_3, //TODO
             .presc = 24,
             .period_ticks = 40000,
             .timer = TIM4
         };
-        cmr_pwmInit(&channel_1_PWM, &pwmPinConfig1);
-        cmr_pwmInit(&channel_2_PWM, &pwmPinConfig2);
-        cmr_pwmInit(&channel_3_PWM, &pwmPinConfig3);
+        cmr_pwmInit(&pump_1_PWM, &pwmPinConfig1);
+        cmr_pwmInit(&pump_2_PWM, &pwmPinConfig2);
+        // cmr_pwmInit(&channel_3_PWM, &pwmPinConfig3);
 
         TickType_t lastWakeTime = xTaskGetTickCount();
         while (1) {
 
             switch (heartbeat.state) {
+                case CMR_CAN_HV_EN: // hv pump enable same as rtd pump enable
                 case CMR_CAN_RTD:
-                    channel_1_State = 100;
-                    channel_2_State = 100;
-                    channel_3_State = 100;
-                    cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                    cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                    cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                    cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
-                    break;
-                case CMR_CAN_HV_EN:
-                    channel_1_State = 100;
-                    channel_2_State = 100;
-                    channel_3_State = 100;
-                    cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                    cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                    cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                    cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+                {
+                    //int accum_temp = (cmr_sensorListGetValue(sensors, SENSOR_CH_THERM_5) + cmr_sensorListGetValue(sensors, SENSOR_CH_THERM_6)) / 2; //TODO: how to get value
+                    // Below: revision - using CAN to get data from HVC
+                    //Next line's citation: from what nsaizan wrote in this file above
+                    cmr_canHVCPackMinMaxCellTemps_t *minMaxTemps = canGetPayload(CANRX_HVC_MINMAX_TEMPS);
+                    // Use the temperature of the hottest cell as the AC's temperature
+                    uint16_t accum_temp = minMaxTemps->maxCellTemp_dC;
+                    
+                    
+                    //55C assumed high temperature, 25C assumed low temperature
+                    //30 min speed, 100 max speed
+                    //a(accum_temp) + b = fan_speed
+                    pump_1_State = (accum_temp * 7 /3) - (3620 / 3);
+
+                    uint16_t inverter_temp = (cmr_sensorListGetValue(&sensorList, SENSOR_CH_THERM_7) + cmr_sensorListGetValue(&sensorList, SENSOR_CH_THERM_8)) / 2;
+                    // 45C assumed high temperature (50C inverter starts to derate), 25C assumed low temperature
+                    // 30 min speed, 100 max speed 
+                    // a(inverter_temp) + b = fan speed 
+                    pump_2_State = (inverter_temp*INVERTER_SCALE) + INVERTER_OFFSET;
+
+                    cmr_pwmSetDutyCycle(&pump_1_PWM, (uint32_t) pump_1_State);
+                    cmr_pwmSetDutyCycle(&pump_2_PWM, (uint32_t) pump_2_State);
+                    
+                    cmr_gpioWrite(GPIO_PUMP_1_ENABLE, 1);
+                    cmr_gpioWrite(GPIO_PUMP_2_ENABLE, 1);
                     break;
+                // case CMR_CAN_HV_EN:
+                //     pump_1_State = 100;
+                //     pump_2_State = 100;
+                //     cmr_pwmSetDutyCycle(&pump_1_PWM, pump_1_State);
+                //     cmr_pwmSetDutyCycle(&pump_2_PWM, pump_2_State);
+                //     cmr_gpioWrite(GPIO_PUMP_1_ENABLE, 1);
+                //     cmr_gpioWrite(GPIO_PUMP_2_ENABLE, 1);
+                //     break;
+                }
                 default:
-                    channel_1_State = 0;
-                    channel_2_State = 0;
-                    channel_3_State = 0;
-                    cmr_pwmSetDutyCycle(&channel_1_PWM, channel_1_State);
-                    cmr_pwmSetDutyCycle(&channel_2_PWM, channel_2_State);
-                    cmr_pwmSetDutyCycle(&channel_3_PWM, channel_3_State);
-                    cmr_gpioWrite(GPIO_CHANNEL_1_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_2_ENABLE, 1);
-                    cmr_gpioWrite(GPIO_CHANNEL_3_ENABLE, 1);
+                    pump_1_State = 0;
+                    pump_2_State = 0;
+                    cmr_pwmSetDutyCycle(&pump_1_PWM, pump_1_State);
+                    cmr_pwmSetDutyCycle(&pump_2_PWM, pump_2_State);
+                    cmr_gpioWrite(GPIO_PUMP_1_ENABLE, 1);
+                    cmr_gpioWrite(GPIO_PUMP_2_ENABLE, 1);
                     break;
             }
 
diff --git a/sensors.c b/sensors.c
index e15a669..d334d53 100644
--- a/sensors.c
+++ b/sensors.c
@@ -36,7 +36,8 @@ static const adcChannel_t sensorsADCChannels[SENSOR_CH_LEN] = {
     [SENSOR_CH_THERM_5]  = ADC_THERM_5,
     [SENSOR_CH_THERM_6]  = ADC_THERM_6,
     [SENSOR_CH_THERM_7]  = ADC_THERM_7,
-    [SENSOR_CH_THERM_8]  = ADC_THERM_8
+    [SENSOR_CH_THERM_8]  = ADC_THERM_8,
+    [SENSOR_CH_THERM_9]  = ADC_THERM_9
 };
 
 /**
@@ -50,8 +51,9 @@ static const adcChannel_t sensorsADCChannels[SENSOR_CH_LEN] = {
  * @return The new value from the ADC.
  */
 static uint32_t sampleADCSensor(const cmr_sensor_t *sensor) {
-    sensorChannel_t sensorChannel = sensor - sensors;
+    sensorChannel_t sensorChannel = sensor - sensors;//Sensor index
     configASSERT(sensorChannel < SENSOR_CH_LEN);
+    // sensorsADCChannels[sensorChannel] is ADC channel
     return adcRead(sensorsADCChannels[sensorChannel]);
 }
 
@@ -162,9 +164,8 @@ float thermistorCalc(float B, float r1, float rTemp, float biasR, float vSense,
 static int32_t adcConvRadTherm_dC(const cmr_sensor_t *s, uint32_t adcVal) {
     float sensed_ratio = adcVal / ((float) 4095);
     float sensed_voltage = sensed_ratio * ((float) 3.3);
-
-    //3435
-    float sensed_temp = thermistorCalc(3435.f, 10000.f, 25.f, 5.6e3, sensed_voltage, 2.6f);
+//B=3892 from thermistor
+    float sensed_temp = thermistorCalc(3892.f, 10000.f, 25.f, 5.6e3, sensed_voltage, 2.6f);
     return sensed_temp * 10; //to report dC units
 }
 
@@ -264,6 +265,13 @@ static cmr_sensor_t sensors[SENSOR_CH_LEN] = {
         .readingMin = 0,
         .readingMax = CMR_ADC_MAX,
         .outOfRange_pcnt = 10
+    },
+    [SENSOR_CH_THERM_9] = {
+        .sample = sampleADCSensor,
+        .conv = adcConvRadTherm_dC,
+        .readingMin = 0,
+        .readingMax = CMR_ADC_MAX,
+        .outOfRange_pcnt = 10
     }
 };
 
diff --git a/sensors.h b/sensors.h
index 165697f..d0d4d38 100644
--- a/sensors.h
+++ b/sensors.h
@@ -25,6 +25,7 @@ typedef enum {
     SENSOR_CH_THERM_6,
     SENSOR_CH_THERM_7,
     SENSOR_CH_THERM_8,
+    SENSOR_CH_THERM_9,
     SENSOR_CH_LEN
 } sensorChannel_t;
 
diff --git a/stm32f413-drivers b/stm32f413-drivers
index 680f0a0..fe6c7ba 160000
--- a/stm32f413-drivers
+++ b/stm32f413-drivers
@@ -1 +1 @@
-Subproject commit 680f0a0827befcea3d02fd9637b4667e783d1392
+Subproject commit fe6c7ba94c9c4ab3fe50523af7de552039225c3d
